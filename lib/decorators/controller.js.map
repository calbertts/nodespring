{"version":3,"sources":["../../src/decorators/controller.js"],"names":[],"mappings":";;;;;QAUgB,U,GAAA,U;;;;;;;;;;;;;;;;AAAT,SAAS,UAAT,GAAsB;;AAE3B,MAAI,kBAAkB,eAAK,OAAL,CAAa,yBAAe,QAAf,GAA0B,OAA1B,CAAkC,0BAAgB,MAAlD,EAA0D,EAA1D,EAA8D,OAA9D,CAAsE,KAAtE,EAA6E,EAA7E,CAAb,CAAtB;;AAEA,MAAI,OAAO,UAAU,CAAV,CAAX;AACA,MAAI,UAAU,EAAd;;AAEA,MAAI,YAAY,SAAZ,SAAY,CAAC,MAAD,EAAY;AAC1B,QAAI,cAAc,kBAAkB,GAAlB,GAAwB,OAAO,IAAjD;;AAEA,WAAO,WAAP,GAAqB,WAArB;AACA,WAAO,UAAP,GAAoB,YAApB;AACA,8BAAgB,aAAhB,CAA8B,MAA9B,EAAsC,QAAQ,IAAR,IAAgB,OAAO,IAA7D,EAAmE,QAAQ,SAAR,IAAqB,OAAO,IAA/F;AACD,GAND;;AAQA,MAAG,UAAU,MAAV,KAAqB,CAArB,IAA2B,UAAU,MAAV,KAAqB,CAArB,IAA0B,CAAC,yBAAe,OAAf,CAAuB,UAAU,CAAV,CAAvB,CAAzD,EAAgG;AAC9F,cAAU,UAAU,CAAV,KAAgB,EAA1B;AACA,WAAO,SAAP;AACD,GAHD,MAGO;AACL,QAAI,SAAS,UAAU,CAAV,CAAb;AACA,WAAO,IAAP,GAAc,YAAd;;AAEA,cAAU,MAAV;AACD;AACF,C","file":"controller.js","sourcesContent":["/**\n * Controller decorator\n * @author calbertts\n */\n\nimport ModuleContainer from '../core/ModuleContainer'\nimport NodeSpringUtil from '../core/NodeSpringUtil'\nimport path from 'path'\n\n\nexport function Controller() {\n\n  let basePackagePath = path.dirname(NodeSpringUtil.getStack().replace(ModuleContainer.appDir, '').replace('.js', ''))\n\n  let args = arguments[0]\n  let options = {}\n\n  let addModule = (target) => {\n    let packagePath = basePackagePath + '/' + target.name\n\n    target.packagePath = packagePath\n    target.moduleType = 'controller'\n    ModuleContainer.addController(target, options.path || target.name, options.namespace || target.name)\n  }\n\n  if(arguments.length === 0 || (arguments.length === 1 && !NodeSpringUtil.isClass(arguments[0]))) {\n    options = arguments[0] || {}\n    return addModule\n  } else {\n    let target = arguments[0]\n    target.type = 'controller'\n\n    addModule(target)\n  }\n}\n"]}