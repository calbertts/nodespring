{"version":3,"sources":["../../src/decorators/controller.js"],"names":[],"mappings":";;;;;QAUgB;;;;;;;;;;;;;;;;AAAT,SAAS,UAAT,GAAsB;;AAE3B,MAAI,kBAAkB,eAAK,OAAL,CAAa,yBAAe,QAAf,GAA0B,OAA1B,CAAkC,0BAAgB,MAAhB,EAAwB,EAA1D,EAA8D,OAA9D,CAAsE,KAAtE,EAA6E,EAA7E,CAAb,CAAlB,CAFuB;;AAI3B,MAAI,OAAO,UAAU,CAAV,CAAP,CAJuB;AAK3B,MAAI,UAAU,EAAV,CALuB;;AAO3B,MAAI,YAAY,SAAZ,SAAY,CAAC,MAAD,EAAY;AAC1B,QAAI,cAAc,kBAAkB,GAAlB,GAAwB,OAAO,IAAP,CADhB;;AAG1B,WAAO,WAAP,GAAqB,WAArB,CAH0B;AAI1B,WAAO,UAAP,GAAoB,YAApB,CAJ0B;AAK1B,8BAAgB,aAAhB,CAA8B,MAA9B,EAAsC,QAAQ,IAAR,IAAgB,OAAO,IAAP,EAAa,QAAQ,SAAR,IAAqB,OAAO,IAAP,CAAxF,CAL0B;GAAZ,CAPW;;AAe3B,MAAG,UAAU,MAAV,KAAqB,CAArB,IAA2B,UAAU,MAAV,KAAqB,CAArB,IAA0B,CAAC,yBAAe,OAAf,CAAuB,UAAU,CAAV,CAAvB,CAAD,EAAwC;AAC9F,cAAU,UAAU,CAAV,KAAgB,EAAhB,CADoF;AAE9F,WAAO,SAAP,CAF8F;GAAhG,MAGO;AACL,QAAI,SAAS,UAAU,CAAV,CAAT,CADC;AAEL,WAAO,IAAP,GAAc,YAAd,CAFK;;AAIL,cAAU,MAAV,EAJK;GAHP;CAfK","file":"controller.js","sourcesContent":["/**\n * Controller decorator\n * @author calbertts\n */\n\nimport ModuleContainer from '../core/ModuleContainer'\nimport NodeSpringUtil from '../core/NodeSpringUtil'\nimport path from 'path'\n\n\nexport function Controller() {\n\n  let basePackagePath = path.dirname(NodeSpringUtil.getStack().replace(ModuleContainer.appDir, '').replace('.js', ''))\n\n  let args = arguments[0]\n  let options = {}\n\n  let addModule = (target) => {\n    let packagePath = basePackagePath + '/' + target.name\n\n    target.packagePath = packagePath\n    target.moduleType = 'controller'\n    ModuleContainer.addController(target, options.path || target.name, options.namespace || target.name)\n  }\n\n  if(arguments.length === 0 || (arguments.length === 1 && !NodeSpringUtil.isClass(arguments[0]))) {\n    options = arguments[0] || {}\n    return addModule\n  } else {\n    let target = arguments[0]\n    target.type = 'controller'\n\n    addModule(target)\n  }\n}\n"]}